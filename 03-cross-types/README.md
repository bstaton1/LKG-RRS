> This repository subdirectory contains all code to reproduce the analyses informing research question #3:
>
> _Does expected reproductive output vary depending on the origins of the spawners involved; e.g., does a spawning pair involving two NOR spawners have a different expected reproductive output than one involving one NOR and one HOR spawner?_

## Analysis Overview

The analysis is divided into several steps which are repeated identically for total juvenile and adult progeny.

1. `cross-type-analysis.R` - prepares the raw data, fits four candidate zero-truncated negative binomial GLMs, selects the best model (i.e., the one with the lowest AICc score), obtains model-predicted values for the original data and from a parametric bootstrap, calculates the ratio of expected reproductive output for each cross type with type HxH, and saves the model object and the model-predicted values.
2. `cross-type-plots.R` - creates the plot comparing the relative reproductive success ratios by cross type and progeny type. **Do not execute this script until the analysis has been executed for both juvenile and adult progeny**

## How to Run the Analysis

### Via Terminal (Recommended)

This analysis is most easily reproduced by opening a terminal window in the R project directory and executing:

```bash
Rscript 03-cross-types/01-cross-type-analysis.R Juv 1000 FALSE
```

Which will run the analysis for the juvenile progeny stage using 1,000 bootstrap iterations and without making the output plots. When this is completed (should not take more than several minutes, the bootstrap is the most time-intensive step), perform the adult progeny stage analysis and this time specify that you wish to have the output plots generated:

```bash
Rscript 03-cross-types/01-cross-type-analysis.R Adult 1000 TRUE
```

The file `cross-type-plots.R` script is sourced at the bottom of the `01-cross-type-analysis.R` script when it is executed with the `TRUE` command line argument.

### Without Terminal

If you do not have access to a terminal, you can still run the analysis in an interactive R session. Open the `01-cross-type-analysis.R` file, ensure the working directory is set to the R project directory, and replace this line:

```R
args = commandArgs(trailingOnly = TRUE)
```

with this:

```R
args = c("Juv", "1000", "FALSE")
```

and execute the entire script to run the juvenile progeny analysis. This can be repeated for the adult progeny analysis and to have the plot generated by setting this line to:

```R
args = c("Adult", "1000", "TRUE")
```

and executing the entire script.